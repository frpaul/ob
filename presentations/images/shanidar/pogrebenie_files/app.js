!function(t){"$:nomunge";function e(t){return"string"==typeof t}function a(t){var e=w.call(arguments,1);return function(){return t.apply(this,e.concat(w.call(arguments)))}}function i(t){return t.replace(g,"$2")}function r(t){return t.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function n(a,i,r,n,o){var s,u,f,m,p;return n!==l?(f=r.match(a?g:/^([^#?]*)\??([^#]*)(#?.*)/),p=f[3]||"",2===o&&e(n)?u=n.replace(a?v:N,""):(m=d(f[2]),n=e(n)?d[a?A:_](n):n,u=2===o?n:1===o?t.extend({},n,m):t.extend({},m,n),u=c(u),a&&(u=u.replace(b,k))),s=f[1]+(a?x:u||!f[1]?"?":"")+u+p):s=i(r!==l?r:location.href),s}function o(t,a,i){return a===l||"boolean"==typeof a?(i=a,a=j[t?A:_]()):a=e(a)?a.replace(t?v:N,""):a,d(a,i)}function s(a,i,r,n){return e(r)||"object"==typeof r||(n=r,r=i,i=l),this.each(function(){var e=t(this),o=i||h()[(this.nodeName||"").toLowerCase()]||"",s=o&&e.attr(o)||"";e.attr(o,j[a](s,r,n))})}var l,c,u,d,f,m,p,h,v,g,b,y,x,w=Array.prototype.slice,k=decodeURIComponent,j=t.param,C=t.bbq=t.bbq||{},T=t.event.special,S="hashchange",_="querystring",A="fragment",L="elemUrlAttr",O="href",E="src",N=/^.*\?|#.*$/g,D={};j[_]=a(n,0,r),j[A]=u=a(n,1,i),j.sorted=c=function(e,a){var i=[],r={};return t.each(j(e,a).split("&"),function(t,e){var a=e.replace(/(?:%5B|=).*$/,""),n=r[a];n||(n=r[a]=[],i.push(a)),n.push(e)}),t.map(i.sort(),function(t){return r[t]}).join("&")},u.noEscape=function(e){e=e||"";var a=t.map(e.split(""),encodeURIComponent);b=new RegExp(a.join("|"),"g")},u.noEscape(",/"),u.ajaxCrawlable=function(t){return t!==l&&(t?(v=/^.*(?:#!|#)/,g=/^([^#]*)(?:#!|#)?(.*)$/,x="#!"):(v=/^.*#/,g=/^([^#]*)#?(.*)$/,x="#"),y=!!t),y},u.ajaxCrawlable(0),t.deparam=d=function(e,a){var i={},r={"true":!0,"false":!1,"null":null};return t.each(e.replace(/\+/g," ").split("&"),function(e,n){var o,s=n.split("="),c=k(s[0]),u=i,d=0,f=c.split("]["),m=f.length-1;if(/\[/.test(f[0])&&/\]$/.test(f[m])?(f[m]=f[m].replace(/\]$/,""),f=f.shift().split("[").concat(f),m=f.length-1):m=0,2===s.length)if(o=k(s[1]),a&&(o=o&&!isNaN(o)?+o:"undefined"===o?l:r[o]!==l?r[o]:o),m)for(;m>=d;d++)c=""===f[d]?u.length:f[d],u=u[c]=m>d?u[c]||(f[d+1]&&isNaN(f[d+1])?{}:[]):o;else t.isArray(i[c])?i[c].push(o):i[c]=i[c]!==l?[i[c],o]:o;else c&&(i[c]=a?l:"")}),i},d[_]=a(o,0),d[A]=f=a(o,1),t[L]||(t[L]=function(e){return t.extend(D,e)})({a:O,base:O,iframe:E,img:E,input:E,form:"action",link:O,script:E}),h=t[L],t.fn[_]=a(s,_),t.fn[A]=a(s,A),C.pushState=m=function(t,a){e(t)&&/^#/.test(t)&&a===l&&(a=2);var i=t!==l,r=u(location.href,i?t:{},i?a:2);location.href=r},C.getState=p=function(t,e){return t===l||"boolean"==typeof t?f(t):f(e)[t]},C.removeState=function(e){var a={};e!==l&&(a=p(),t.each(t.isArray(e)?e:arguments,function(t,e){delete a[e]})),m(a,2)},T[S]=t.extend(T[S],{add:function(e){function a(t){var e=t[A]=u();t.getState=function(t,a){return t===l||"boolean"==typeof t?d(e,t):d(e,a)[t]},i.apply(this,arguments)}var i;return t.isFunction(e)?(i=e,a):(i=e.handler,void(e.handler=a))}})}(jQuery,this),function(t,e,a){"$:nomunge";function i(t){return t=t||location.href,"#"+t.replace(/^[^#]*#?(.*)$/,"$1")}var r,n="hashchange",o=document,s=t.event.special,l=o.documentMode,c="on"+n in e&&(l===a||l>7);t.fn[n]=function(t){return t?this.bind(n,t):this.trigger(n)},t.fn[n].delay=50,s[n]=t.extend(s[n],{setup:function(){return c?!1:void t(r.start)},teardown:function(){return c?!1:void t(r.stop)}}),r=function(){function r(){var a=i(),o=m(u);a!==u?(f(u=a,o),t(e).trigger(n)):o!==u&&(location.href=location.href.replace(/#.*/,"")+o),s=setTimeout(r,t.fn[n].delay)}var s,l={},u=i(),d=function(t){return t},f=d,m=d;return l.start=function(){s||r()},l.stop=function(){s&&clearTimeout(s),s=a},null!==navigator.userAgent.match(/MSIE/i)&&!c&&function(){var e,a;l.start=function(){e||(a=t.fn[n].src,a=a&&a+i(),e=t('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){a||f(i()),r()}).attr("src",a||"javascript:0").insertAfter("body")[0].contentWindow,o.onpropertychange=function(){try{"title"===event.propertyName&&(e.document.title=o.title)}catch(t){}})},l.stop=d,m=function(){return i(e.location.href)},f=function(a,i){var r=e.document,s=t.fn[n].domain;a!==i&&(r.title=o.title,r.open(),s&&r.write('<script>document.domain="'+s+'"</script>'),r.close(),e.location.hash=a)}}(),l}()}(jQuery,this),function(t){var e={};t.fn.yiiListView=function(e){return this.each(function(){var a=t.extend({},t.fn.yiiListView.defaults,e||{}),i=t(this),r=i.attr("id");void 0==a.updateSelector&&(a.updateSelector="#"+r+" ."+a.pagerClass.replace(/\s+/g,".")+" a, #"+r+" ."+a.sorterClass.replace(/\s+/g,".")+" a"),t.fn.yiiListView.settings[r]=a,a.ajaxUpdate.length>0&&(t(document).on("click.yiiListView",a.updateSelector,function(){if(a.enableHistory&&window.History.enabled){var e=t(this).attr("href");if(e){var i=e.split("?"),n=t.deparam.querystring("?"+(i[1]||""));delete n[a.ajaxVar];var o=t.param.querystring(i[0],n);window.History.pushState({url:o},document.title,decodeURIComponent(o))}}else t.fn.yiiListView.update(r,{url:t(this).attr("href")});return!1}),a.enableHistory&&window.History.enabled&&t(window).bind("statechange",function(){var e=window.History.getState();void 0===e.data.url&&(e.data.url=e.url),t.fn.yiiListView.update(r,e.data)}))})},t.fn.yiiListView.defaults={ajaxUpdate:[],ajaxVar:"ajax",ajaxType:"GET",pagerClass:"pager",loadingClass:"loading",sorterClass:"sorter"},t.fn.yiiListView.settings={},t.fn.yiiListView.getKey=function(e,a){return t("#"+e+" > div.keys > span:eq("+a+")").text()},t.fn.yiiListView.getUrl=function(e){var a=t.fn.yiiListView.settings[e];return a.url||t("#"+e+" > div.keys").attr("title")},t.fn.yiiListView.update=function(a,i){var r,n=t.fn.yiiListView.settings[a];i&&void 0!==i.error&&(r=i.error,delete i.error),i=t.extend({type:n.ajaxType,url:t.fn.yiiListView.getUrl(a),success:function(e){t.each(n.ajaxUpdate,function(a,i){var r="#"+i;t(r).replaceWith(t(r,"<div>"+e+"</div>"))}),void 0!=n.afterAjaxUpdate&&n.afterAjaxUpdate(a,e)},complete:function(){t("#"+a).removeClass(n.loadingClass),e[a]=null},error:function(t,e,i){var o,s;if(0!==t.readyState&&0!==t.status&&(void 0===r||(o=r(t),void 0===o||o))){switch(e){case"timeout":s="The request timed out!";break;case"parsererror":s="Parser error!";break;case"error":s=t.status&&!/^\s*$/.test(t.status)?"Error "+t.status:"Error",t.responseText&&!/^\s*$/.test(t.responseText)&&(s=s+": "+t.responseText)}void 0!==n.ajaxUpdateError?n.ajaxUpdateError(t,e,i,s,a):s&&alert(s)}}},i||{}),void 0!=i.data&&"GET"==i.type&&(i.url=t.param.querystring(i.url,i.data),i.data={}),n.ajaxVar&&(i.url=t.param.querystring(i.url,n.ajaxVar+"="+a)),null!=e[a]&&e[a].abort(),t("#"+a).addClass(n.loadingClass),void 0!=n.beforeAjaxUpdate&&n.beforeAjaxUpdate(a,i),e[a]=t.ajax(i)}}(jQuery),function(t,e,a,i){"use strict";function r(r,n,o,s){function l(){if(j=e.devicePixelRatio>1,null!==n("defaultImage")||null!==n("placeholder"))for(var a=0;a<o.length;a++){var i=t(o[a]),l=o[a].tagName.toLowerCase(),u="background-image";i.data("plugin_"+r.name,r),"img"==l&&n("defaultImage")&&!i.attr("src")?i.attr("src",n("defaultImage")):"img"==l||!n("placeholder")||i.css(u)&&"none"!=i.css(u)||i.css(u,"url("+n("placeholder")+")")}n("delay")>=0&&setTimeout(function(){c(!0)},n("delay")),(n("delay")<0||n("combined"))&&(c(),s.e=h(n("throttle"),function(t){"resize"===t.type&&(w=k=-1),y(function(){c(t.all)},r,!0)}),t(n("appendScroll")).on("scroll."+r.name+" resize."+r.name,s.e))}function c(e){if(!o.length)return r.destroy();for(var a=!1,i=0;i<o.length;i++)(function(i){if(d(i)||e){var r=t(i),o=i.tagName.toLowerCase();if(r.data(n("handledName")))return;r.attr(n("attribute"))&&("img"==o&&r.attr(n("attribute"))!=r.attr("src")||"img"!=o&&r.attr(n("attribute"))!=r.css("background-image"))&&(r.is(":visible")||!n("visibleOnly"))&&(a=!0,r.data(n("handledName"),!0),y(function(){u(r,o)}))}})(o[i]);a&&y(function(){o=t(o).filter(function(){return!t(this).data(n("handledName"))})})}function u(e,a){var i=t(new Image);++x,i.error(function(){g("onError",e),v()}),i.one("load",function(){e.hide(),"img"==a?e.attr("src",i.attr("src")):e.css("background-image","url("+i.attr("src")+")"),e[n("effect")](n("effectTime")),n("removeAttribute")&&e.removeAttr(n("attribute")+" "+n("retinaAttribute")),g("afterLoad",e),i.off("error").remove(),v()}),g("beforeLoad",e),i.attr("src",e.attr(n(j&&e.attr(n("retinaAttribute"))?"retinaAttribute":"attribute"))),i.complete&&i.load()}function d(t){var e=t.getBoundingClientRect(),a=n("threshold"),i=m()+a>e.top&&-a<e.bottom,r=f()+a>e.left&&-a<e.right;return"vertical"==n("scrollDirection")?i:"horizontal"==n("scrollDirection")?r:i&&r}function f(){return w=p(w,"Width")}function m(){return k=p(k,"Height")}function p(t,i){return t>=0?t:e["inner"+i]||(a.documentElement||a.body)["client"+i]||a.body["offset"+i]||n("fallback"+i)}function h(t,e){var a,r=0;return function(o,s){function l(){r=+new Date,e.call(i,o)}var c=+new Date-r;a&&clearTimeout(a),c>t||!n("enableThrottle")||s?l():a=setTimeout(l,t-c)}}function v(){--x,o.size()||x||g("onFinishedAll",null)}function g(t,e){(t=n(t))&&(e?y(function(){t(e)},r):y(t,r))}function b(){C=setTimeout(function(){y(),T.length&&b()},2)}function y(t,a,i){return t?n("enableQueueing")?(i&&S||(T.push([t,a,i]),i&&(S=!0)),void(1==T.length&&b())):void t.call(a||e):void((t=T.shift())&&(t[2]&&(S=!1),t[0].call(t[1]||e)))}var x=0,w=-1,k=-1,j=!1,C=null,T=[],S=!1;!function(){if(n("onError"))for(var a=0;a<o.length;a++)y(function(){t(this).on("error."+r.name,function(){g("onError",t(this))})},o[a]);"event"==n("bind")?l():t(e).load(l)}()}function n(e,a){a&&t.extend(this.configuration,a);var i=this,n=e,o={e:null},s=function(t){return i.configuration[t]};return i.update=function(t){o.e({},!t)},i.loadAll=function(){o.e({all:!0})},i.destroy=function(){t(s("appendScroll")).off("."+i.name,o.e),n={},o.e=null},r(i,s,n,o),s("chainable")?e:i}t.fn.Lazy=t.fn.lazy=function(t){return new n(this,t)},t.extend(n.prototype,{name:"lazy",configuration:{chainable:!0,bind:"load",threshold:500,fallbackWidth:2e3,fallbackHeight:2e3,visibleOnly:!1,appendScroll:e,scrollDirection:"both",defaultImage:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",placeholder:null,delay:-1,combined:!1,attribute:"data-src",retinaAttribute:"data-retina",removeAttribute:!0,handledName:"handled",effect:"show",effectTime:0,enableThrottle:!0,throttle:250,enableQueueing:!0,beforeLoad:null,afterLoad:null,onError:null,onFinishedAll:null}})}(jQuery,window,document),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(t){"use strict";function e(e){var a=e.data;e.isDefaultPrevented()||(e.preventDefault(),t(e.target).ajaxSubmit(a))}function a(e){var a=e.target,i=t(a);if(!i.is("[type=submit],[type=image]")){var r=i.closest("[type=submit]");if(0===r.length)return;a=r[0]}var n=this;if(n.clk=a,"image"==a.type)if(void 0!==e.offsetX)n.clk_x=e.offsetX,n.clk_y=e.offsetY;else if("function"==typeof t.fn.offset){var o=i.offset();n.clk_x=e.pageX-o.left,n.clk_y=e.pageY-o.top}else n.clk_x=e.pageX-a.offsetLeft,n.clk_y=e.pageY-a.offsetTop;setTimeout(function(){n.clk=n.clk_x=n.clk_y=null},100)}function i(){if(t.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}var r={};r.fileapi=void 0!==t("<input type='file'/>").get(0).files,r.formdata=void 0!==window.FormData;var n=!!t.fn.prop;t.fn.attr2=function(){if(!n)return this.attr.apply(this,arguments);var t=this.prop.apply(this,arguments);return t&&t.jquery||"string"==typeof t?t:this.attr.apply(this,arguments)},t.fn.ajaxSubmit=function(e){function a(a){var i,r,n=t.param(a,e.traditional).split("&"),o=n.length,s=[];for(i=0;o>i;i++)n[i]=n[i].replace(/\+/g," "),r=n[i].split("="),s.push([decodeURIComponent(r[0]),decodeURIComponent(r[1])]);return s}function o(i){for(var r=new FormData,n=0;n<i.length;n++)r.append(i[n].name,i[n].value);if(e.extraData){var o=a(e.extraData);for(n=0;n<o.length;n++)o[n]&&r.append(o[n][0],o[n][1])}e.data=null;var s=t.extend(!0,{},t.ajaxSettings,e,{contentType:!1,processData:!1,cache:!1,type:l||"POST"});e.uploadProgress&&(s.xhr=function(){var a=t.ajaxSettings.xhr();return a.upload&&a.upload.addEventListener("progress",function(t){var a=0,i=t.loaded||t.position,r=t.total;t.lengthComputable&&(a=Math.ceil(i/r*100)),e.uploadProgress(t,i,r,a)},!1),a}),s.data=null;var c=s.beforeSend;return s.beforeSend=function(t,a){a.data=e.formData?e.formData:r,c&&c.call(this,t,a)},t.ajax(s)}function s(a){function r(t){var e=null;try{t.contentWindow&&(e=t.contentWindow.document)}catch(a){i("cannot get iframe.contentWindow document: "+a)}if(e)return e;try{e=t.contentDocument?t.contentDocument:t.document}catch(a){i("cannot get iframe.contentDocument: "+a),e=t.document}return e}function o(){function e(){try{var t=r(g).readyState;i("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(a){i("Server abort: ",a," (",a.name,")"),s(S),k&&clearTimeout(k),k=void 0}}var a=d.attr2("target"),n=d.attr2("action"),o="multipart/form-data",c=d.attr("enctype")||d.attr("encoding")||o;j.setAttribute("target",p),(!l||/post/i.test(l))&&j.setAttribute("method","POST"),n!=f.url&&j.setAttribute("action",f.url),f.skipEncodingOverride||l&&!/post/i.test(l)||d.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),f.timeout&&(k=setTimeout(function(){w=!0,s(T)},f.timeout));var u=[];try{if(f.extraData)for(var m in f.extraData)f.extraData.hasOwnProperty(m)&&u.push(t.isPlainObject(f.extraData[m])&&f.extraData[m].hasOwnProperty("name")&&f.extraData[m].hasOwnProperty("value")?t('<input type="hidden" name="'+f.extraData[m].name+'">').val(f.extraData[m].value).appendTo(j)[0]:t('<input type="hidden" name="'+m+'">').val(f.extraData[m]).appendTo(j)[0]);f.iframeTarget||v.appendTo("body"),g.attachEvent?g.attachEvent("onload",s):g.addEventListener("load",s,!1),setTimeout(e,15);try{j.submit()}catch(h){var b=document.createElement("form").submit;b.apply(j)}}finally{j.setAttribute("action",n),j.setAttribute("enctype",c),a?j.setAttribute("target",a):d.removeAttr("target"),t(u).remove()}}function s(e){if(!b.aborted&&!E){if(O=r(g),O||(i("cannot access response document"),e=S),e===T&&b)return b.abort("timeout"),void C.reject(b,"timeout");if(e==S&&b)return b.abort("server abort"),void C.reject(b,"error","server abort");if(O&&O.location.href!=f.iframeSrc||w){g.detachEvent?g.detachEvent("onload",s):g.removeEventListener("load",s,!1);var a,n="success";try{if(w)throw"timeout";var o="xml"==f.dataType||O.XMLDocument||t.isXMLDoc(O);if(i("isXml="+o),!o&&window.opera&&(null===O.body||!O.body.innerHTML)&&--N)return i("requeing onLoad callback, DOM not available"),void setTimeout(s,250);var l=O.body?O.body:O.documentElement;b.responseText=l?l.innerHTML:null,b.responseXML=O.XMLDocument?O.XMLDocument:O,o&&(f.dataType="xml"),b.getResponseHeader=function(t){var e={"content-type":f.dataType};return e[t.toLowerCase()]},l&&(b.status=Number(l.getAttribute("status"))||b.status,b.statusText=l.getAttribute("statusText")||b.statusText);var c=(f.dataType||"").toLowerCase(),u=/(json|script|text)/.test(c);if(u||f.textarea){var d=O.getElementsByTagName("textarea")[0];if(d)b.responseText=d.value,b.status=Number(d.getAttribute("status"))||b.status,b.statusText=d.getAttribute("statusText")||b.statusText;else if(u){var p=O.getElementsByTagName("pre")[0],h=O.getElementsByTagName("body")[0];p?b.responseText=p.textContent?p.textContent:p.innerText:h&&(b.responseText=h.textContent?h.textContent:h.innerText)}}else"xml"==c&&!b.responseXML&&b.responseText&&(b.responseXML=D(b.responseText));try{L=Q(b,c,f)}catch(y){n="parsererror",b.error=a=y||n}}catch(y){i("error caught: ",y),n="error",b.error=a=y||n}b.aborted&&(i("upload aborted"),n=null),b.status&&(n=b.status>=200&&b.status<300||304===b.status?"success":"error"),"success"===n?(f.success&&f.success.call(f.context,L,"success",b),C.resolve(b.responseText,"success",b),m&&t.event.trigger("ajaxSuccess",[b,f])):n&&(void 0===a&&(a=b.statusText),f.error&&f.error.call(f.context,b,n,a),C.reject(b,"error",a),m&&t.event.trigger("ajaxError",[b,f,a])),m&&t.event.trigger("ajaxComplete",[b,f]),m&&!--t.active&&t.event.trigger("ajaxStop"),f.complete&&f.complete.call(f.context,b,n),E=!0,f.timeout&&clearTimeout(k),setTimeout(function(){f.iframeTarget?v.attr("src",f.iframeSrc):v.remove(),b.responseXML=null},100)}}}var c,u,f,m,p,v,g,b,y,x,w,k,j=d[0],C=t.Deferred();if(C.abort=function(t){b.abort(t)},a)for(u=0;u<h.length;u++)c=t(h[u]),n?c.prop("disabled",!1):c.removeAttr("disabled");if(f=t.extend(!0,{},t.ajaxSettings,e),f.context=f.context||f,p="jqFormIO"+(new Date).getTime(),f.iframeTarget?(v=t(f.iframeTarget),x=v.attr2("name"),x?p=x:v.attr2("name",p)):(v=t('<iframe name="'+p+'" src="'+f.iframeSrc+'" />'),v.css({position:"absolute",top:"-1000px",left:"-1000px"})),g=v[0],b={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var a="timeout"===e?"timeout":"aborted";i("aborting upload... "+a),this.aborted=1;try{g.contentWindow.document.execCommand&&g.contentWindow.document.execCommand("Stop")}catch(r){}v.attr("src",f.iframeSrc),b.error=a,f.error&&f.error.call(f.context,b,a,e),m&&t.event.trigger("ajaxError",[b,f,a]),f.complete&&f.complete.call(f.context,b,a)}},m=f.global,m&&0===t.active++&&t.event.trigger("ajaxStart"),m&&t.event.trigger("ajaxSend",[b,f]),f.beforeSend&&f.beforeSend.call(f.context,b,f)===!1)return f.global&&t.active--,C.reject(),C;if(b.aborted)return C.reject(),C;y=j.clk,y&&(x=y.name,x&&!y.disabled&&(f.extraData=f.extraData||{},f.extraData[x]=y.value,"image"==y.type&&(f.extraData[x+".x"]=j.clk_x,f.extraData[x+".y"]=j.clk_y)));var T=1,S=2,_=t("meta[name=csrf-token]").attr("content"),A=t("meta[name=csrf-param]").attr("content");A&&_&&(f.extraData=f.extraData||{},f.extraData[A]=_),f.forceSync?o():setTimeout(o,10);var L,O,E,N=50,D=t.parseXML||function(t,e){return window.ActiveXObject?(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!=e.documentElement.nodeName?e:null},U=t.parseJSON||function(t){return window.eval("("+t+")")},Q=function(e,a,i){var r=e.getResponseHeader("content-type")||"",n="xml"===a||!a&&r.indexOf("xml")>=0,o=n?e.responseXML:e.responseText;return n&&"parsererror"===o.documentElement.nodeName&&t.error&&t.error("parsererror"),i&&i.dataFilter&&(o=i.dataFilter(o,a)),"string"==typeof o&&("json"===a||!a&&r.indexOf("json")>=0?o=U(o):("script"===a||!a&&r.indexOf("javascript")>=0)&&t.globalEval(o)),o};return C}if(!this.length)return i("ajaxSubmit: skipping submit process - no element selected"),this;var l,c,u,d=this;"function"==typeof e?e={success:e}:void 0===e&&(e={}),l=e.type||this.attr2("method"),c=e.url||this.attr2("action"),u="string"==typeof c?t.trim(c):"",u=u||window.location.href||"",u&&(u=(u.match(/^([^#]+)/)||[])[1]),e=t.extend(!0,{url:u,success:t.ajaxSettings.success,type:l||t.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},e);var f={};if(this.trigger("form-pre-serialize",[this,e,f]),f.veto)return i("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(e.beforeSerialize&&e.beforeSerialize(this,e)===!1)return i("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var m=e.traditional;void 0===m&&(m=t.ajaxSettings.traditional);var p,h=[],v=this.formToArray(e.semantic,h);if(e.data&&(e.extraData=e.data,p=t.param(e.data,m)),e.beforeSubmit&&e.beforeSubmit(v,this,e)===!1)return i("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[v,this,e,f]),f.veto)return i("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var g=t.param(v,m);p&&(g=g?g+"&"+p:p),"GET"==e.type.toUpperCase()?(e.url+=(e.url.indexOf("?")>=0?"&":"?")+g,e.data=null):e.data=g;var b=[];if(e.resetForm&&b.push(function(){d.resetForm()}),e.clearForm&&b.push(function(){d.clearForm(e.includeHidden)}),!e.dataType&&e.target){var y=e.success||function(){};b.push(function(a){var i=e.replaceTarget?"replaceWith":"html";t(e.target)[i](a).each(y,arguments)})}else e.success&&b.push(e.success);if(e.success=function(t,a,i){for(var r=e.context||this,n=0,o=b.length;o>n;n++)b[n].apply(r,[t,a,i||d,d])},e.error){var x=e.error;e.error=function(t,a,i){var r=e.context||this;x.apply(r,[t,a,i,d])}}if(e.complete){var w=e.complete;e.complete=function(t,a){var i=e.context||this;w.apply(i,[t,a,d])}}var k=t("input[type=file]:enabled",this).filter(function(){return""!==t(this).val()}),j=k.length>0,C="multipart/form-data",T=d.attr("enctype")==C||d.attr("encoding")==C,S=r.fileapi&&r.formdata;i("fileAPI :"+S);var _,A=(j||T)&&!S;e.iframe!==!1&&(e.iframe||A)?e.closeKeepAlive?t.get(e.closeKeepAlive,function(){_=s(v)}):_=s(v):_=(j||T)&&S?o(v):t.ajax(e),d.removeData("jqxhr").data("jqxhr",_);for(var L=0;L<h.length;L++)h[L]=null;return this.trigger("form-submit-notify",[this,e]),this},t.fn.ajaxForm=function(r){if(r=r||{},r.delegation=r.delegation&&t.isFunction(t.fn.on),!r.delegation&&0===this.length){var n={s:this.selector,c:this.context};return!t.isReady&&n.s?(i("DOM not ready, queuing ajaxForm"),t(function(){t(n.s,n.c).ajaxForm(r)}),this):(i("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this)}return r.delegation?(t(document).off("submit.form-plugin",this.selector,e).off("click.form-plugin",this.selector,a).on("submit.form-plugin",this.selector,r,e).on("click.form-plugin",this.selector,r,a),this):this.ajaxFormUnbind().bind("submit.form-plugin",r,e).bind("click.form-plugin",r,a)},t.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},t.fn.formToArray=function(e,a){var i=[];if(0===this.length)return i;var n,o=this[0],s=this.attr("id"),l=e?o.getElementsByTagName("*"):o.elements;if(l&&!/MSIE [678]/.test(navigator.userAgent)&&(l=t(l).get()),s&&(n=t(":input[form="+s+"]").get(),n.length&&(l=(l||[]).concat(n))),!l||!l.length)return i;var c,u,d,f,m,p,h;for(c=0,p=l.length;p>c;c++)if(m=l[c],d=m.name,d&&!m.disabled)if(e&&o.clk&&"image"==m.type)o.clk==m&&(i.push({name:d,value:t(m).val(),type:m.type}),i.push({name:d+".x",value:o.clk_x},{name:d+".y",value:o.clk_y}));else if(f=t.fieldValue(m,!0),f&&f.constructor==Array)for(a&&a.push(m),u=0,h=f.length;h>u;u++)i.push({name:d,value:f[u]});else if(r.fileapi&&"file"==m.type){a&&a.push(m);var v=m.files;if(v.length)for(u=0;u<v.length;u++)i.push({name:d,value:v[u],type:m.type});else i.push({name:d,value:"",type:m.type})}else null!==f&&"undefined"!=typeof f&&(a&&a.push(m),i.push({name:d,value:f,type:m.type,required:m.required}));if(!e&&o.clk){var g=t(o.clk),b=g[0];d=b.name,d&&!b.disabled&&"image"==b.type&&(i.push({name:d,value:g.val()}),i.push({name:d+".x",value:o.clk_x},{name:d+".y",value:o.clk_y}))}return i},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var a=[];return this.each(function(){var i=this.name;if(i){var r=t.fieldValue(this,e);if(r&&r.constructor==Array)for(var n=0,o=r.length;o>n;n++)a.push({name:i,value:r[n]});else null!==r&&"undefined"!=typeof r&&a.push({name:this.name,value:r})}}),t.param(a)},t.fn.fieldValue=function(e){for(var a=[],i=0,r=this.length;r>i;i++){var n=this[i],o=t.fieldValue(n,e);null===o||"undefined"==typeof o||o.constructor==Array&&!o.length||(o.constructor==Array?t.merge(a,o):a.push(o))}return a},t.fieldValue=function(e,a){var i=e.name,r=e.type,n=e.tagName.toLowerCase();if(void 0===a&&(a=!0),a&&(!i||e.disabled||"reset"==r||"button"==r||("checkbox"==r||"radio"==r)&&!e.checked||("submit"==r||"image"==r)&&e.form&&e.form.clk!=e||"select"==n&&-1==e.selectedIndex))return null;if("select"==n){var o=e.selectedIndex;if(0>o)return null;for(var s=[],l=e.options,c="select-one"==r,u=c?o+1:l.length,d=c?o:0;u>d;d++){var f=l[d];if(f.selected){var m=f.value;if(m||(m=f.attributes&&f.attributes.value&&!f.attributes.value.specified?f.text:f.value),c)return m;s.push(m)}}return s}return t(e).val()},t.fn.clearForm=function(e){return this.each(function(){t("input,select,textarea",this).clearFields(e)})},t.fn.clearFields=t.fn.clearInputs=function(e){var a=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var i=this.type,r=this.tagName.toLowerCase();a.test(i)||"textarea"==r?this.value="":"checkbox"==i||"radio"==i?this.checked=!1:"select"==r?this.selectedIndex=-1:"file"==i?/MSIE/.test(navigator.userAgent)?t(this).replaceWith(t(this).clone(!0)):t(this).val(""):e&&(e===!0&&/hidden/.test(i)||"string"==typeof e&&t(this).is(e))&&(this.value="")})},t.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},t.fn.enable=function(t){return void 0===t&&(t=!0),this.each(function(){this.disabled=!t})},t.fn.selected=function(e){return void 0===e&&(e=!0),this.each(function(){var a=this.type;if("checkbox"==a||"radio"==a)this.checked=e;else if("option"==this.tagName.toLowerCase()){var i=t(this).parent("select");e&&i[0]&&"select-one"==i[0].type&&i.find("option").selected(!1),this.selected=e}})},t.fn.ajaxSubmit.debug=!1}),function(t){"use strict";t.fn.__abuseHandleJSON=function(e){var a=t("#abuse-dialog");e.modal&&a.modal(e.modal),e.title&&t(".modal-header h3",a).html(e.title),e.submit&&t(".modal-footer .submit",a).html(e.submit),e.cancel&&t(".modal-footer .cancel",a).html(e.cancel),e.body&&(t(".modal-body",a).html(e.body),t(".modal-body .tip",a).tooltip(),t(".modal-body form > textarea",a).focus()),e.uid?e.ok?(e.comment&&t("#abuse-"+e.uid).addClass("disabled"),e.messages&&t.each(e.messages,function(t,e){jQuery("#alerts").notify({type:"success",message:e,fadeOut:{enabled:!0}}).show()})):e.messages&&t.each(e.messages,function(e,i){t(".modal-body",a).prepend('<div class="alert alert-error">'+i+"</div>")}):e.messages&&t.each(e.messages,function(t,e){alert(e)})},t.fn.abuseWidget=function(e){var a=t.extend({},{url:"",loadingText:""},e);return this.each(function(){return t(this).live("click",function(){if(t(this).hasClass("disabled"))return!1;var e=t("#abuse-dialog");e.length||(t("body").append('<div id="abuse-dialog" class="modal fade"><div class="modal-header"><a class="close" data-dismiss="modal">&times;</a><h3></h3></div><div class="modal-body"></div><div class="modal-footer"><a href="#" class="submit btn btn-primary"></a><a href="#" class="cancel btn" data-dismiss="modal"></a></div></div>'),e=t("#abuse-dialog"),e.modal("hide"),t(".modal-body form",e).live("submit",function(){var e=t("#abuse-dialog");return t(".modal-body form",e).length?t(".modal-body form",e).ajaxSubmit({dataType:"json",beforeSubmit:function(){return e.attr("data-loading")&&t(".modal-body",e).prepend('<div class="alert alert-info">'+e.attr("data-loading")+"</div>"),!0},success:function(a){t(".modal-body .alert",e).remove(),t.fn.__abuseHandleJSON(a)}}):e.modal("hide"),!1}),t(".submit",e).live("click",function(){var e=t("#abuse-dialog");return t(".modal-body form",e).submit(),!1}));var i=t(this).attr("id").replace("abuse-","");return e.attr("data-loading",a.loadingText),t.ajax({url:a.url,data:{uid:i},type:"post",dataType:"json",success:t.fn.__abuseHandleJSON}),!1}),this})}}(jQuery),function(t){"use strict";t.fn.away=function(e){var a=t.extend({},{url:""},e);return a.url.length?this.each(function(){var e=t(this).attr("href");if(e&&/^(https?:)?\/\//gi.test(e)&&!/(https?:)?\/\/([a-z\.]+)?(komarovskiy\.net|klubkom\.net|dev)/gi.test(e)){if(!/\.(jpg|png|gif)$/.test(e)){var i,r,n,o,s,l,c,u="",d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f=0;e=e.toString(),e=e.replace(/\x0d\x0a/g,"\n");for(var m=0;m<e.length;m++){var p=e.charCodeAt(m);128>p?u+=String.fromCharCode(p):p>127&&2048>p?(u+=String.fromCharCode(p>>6|192),u+=String.fromCharCode(63&p|128)):(u+=String.fromCharCode(p>>12|224),u+=String.fromCharCode(p>>6&63|128),u+=String.fromCharCode(63&p|128))}for(e=u,u="";f<e.length;)i=e.charCodeAt(f++),r=e.charCodeAt(f++),n=e.charCodeAt(f++),o=i>>2,s=(3&i)<<4|r>>4,l=(15&r)<<2|n>>6,c=63&n,isNaN(r)?l=c=64:isNaN(n)&&(c=64),u=u+d.charAt(o)+d.charAt(s)+d.charAt(l)+d.charAt(c);t(this).attr("href",a.url+"/"+u.replace(/[=]+$/g,""))}t(this).attr("target","_blank").addClass("away")}}):this}}(jQuery),function(t){"use strict";t.bookmarks=function(e,a){var i=this;i.$element=t(e),i.element=e,i.$element.data("bookmarks",i),i.init=function(){i.options=t.extend({},t.bookmarks.defaultOptions,a),t(i.$element).live("click",function(){var e=t(this);if(e.hasClass("disabled"))return!1;e.addClass("disabled");var a=e.attr("id").replace("bookmark-","");return t.ajax({url:i.options.url,data:{id:a},type:"post",async:!1,dataType:"json",success:function(a){a.ok?(e.attr("title",a.tooltip).attr("data-original-title",a.tooltip).tooltip("show"),a.active?e.addClass("active"):e.removeClass("active"),t.each(a.messages,function(t,e){jQuery("#alerts").notify({type:"success",message:e,fadeOut:{enabled:!0}}).show()})):t.each(a.messages,function(t,e){jQuery("#alerts").notify({type:"error",message:e,fadeOut:{enabled:!1}}).show()}),e.removeClass("disabled")}}),!1})},i.init()},t.bookmarks.defaultOptions={url:""},t.fn.bookmarks=function(e){return this.each(function(){new t.bookmarks(this,e)})}}(jQuery),function(t){"use strict";t.fn.commentsWidget=function(e){var a=t.extend({},{uid:"",url:"",submitText:"Add Comment",cancelText:"Cancel",confirmation:"Are you sure?",charCounter:{},redactor:{}},e);return a.redactor=t.extend({},{convertLinks:!1,imageResizable:!1,linebreaks:!0,paragraphy:!1,placeholder:!1,allowedTags:["br","img"],minHeight:43,maxHeight:350,buttons:["smiles","image"],plugins:["smiles"]},e.redactor),this.each(function(){t(".comment-form>form>textarea",this).redactor(a.redactor),t(".redactor_btn",this).tooltip(),t(".comment-delete",this).live("click",function(){if(!confirm(a.confirmation))return!1;var e=t(this).closest(".comment-item");return t.ajax({type:"post",url:a.url,dataType:"json",data:{uid:a.uid,id:e.attr("id").replace("comment-",""),"do":"delete"},success:function(e){e.ok?(t("#comment-"+e.id).replaceWith(t(e.item)),t("#comment-"+e.id+" a.tip").tooltip()):e.messages&&t.each(e.messages,function(t,e){alert(e)})}}),!1}),t(".comment-restore",this).live("click",function(){var e=t(this).closest(".comment-item");return t.ajax({type:"post",url:a.url,dataType:"json",data:{uid:a.uid,id:e.attr("id").replace("comment-",""),"do":"restore"},success:function(e){e.ok?(t("#comment-"+e.id).replaceWith(t(e.item)),t("#comment-"+e.id+" a.tip").tooltip()):e.messages&&t.each(e.messages,function(t,e){alert(e)})}}),!1}),t(".comment-form-submit",this).live("click",function(){var e=t(this).closest("form");return e.hasClass("loading")?!1:(e.addClass("loading"),t.ajax({type:"post",url:a.url,dataType:"json",data:e.serializeArray(),error:function(){e.removeClass("loading")},success:function(a){if(e.removeClass("loading"),a.ok)a.parent>0?(t("#comment-"+a.parent+">.comment-replies").append(a.item),t("#comment-"+a.parent+">.comment-replies a.tip").tooltip(),t("div.comment-reply-form").remove(),t(".comment-reply").removeClass("active")):(t("#comments-widget-"+a.uid+">.media-list").prepend(a.item),t("#comments-widget-"+a.uid+">.media-list a.tip").tooltip(),t("#comments-widget-"+a.uid+" .comment-form textarea").val("")),t("textarea",e).redactor("code.set","");else if(a.messages)for(var i in a.messages)alert(a.messages[i])}}),!1)}),t(".comment-reply-cancel",this).live("click",function(){return t("div.comment-reply-form").slideUp(function(){t("textarea",this).redactor("core.destroy"),t(".comment-reply").removeClass("active"),t(this).remove()}),!1}),t(".comment-reply",this).live("click",function(){if(t(this).hasClass("active"))return t(".comment-reply-form textarea").focus(),!1;var e=t(this).attr("data-cid"),i=t("<div id='reply-"+e+"' class='comment-reply-form' style='display:none;'><form action='' method='post'><input type='hidden' name='uid' value='"+a.uid+"'/><input type='hidden' name='parent' value='0'/><textarea class='media-heading' maxlength='10000' cols='20' rows='3' name='comment'></textarea><span id='rtbc-"+e+"' class='comment-form-toolbar'></span><a class='btn btn-primary comment-form-submit'>"+a.submitText+"</a> <a class='btn comment-reply-cancel'>"+a.cancelText+"</a></form></div>");
return t(".comment-reply").removeClass("active"),t(this).addClass("active"),t("div.comment-reply-form").remove(),e&&(t("input[name=parent]",i).attr("value",e),t("#comment-"+e+">.media>.media-body>.comment-body").append(i),t("textarea",i).redactor(t.extend(a.redactor,{focus:!0,toolbarExternal:"#rtbc-"+e}))),t(".comment-reply-form").slideDown(function(){t(".comment-reply-form textarea").focus()}),!1})})}}(jQuery),function(t){"use strict";t.likes=function(e,a){var i=this;i.$element=t(e),i.element=e,i.$element.data("likes",i),i.init=function(){i.options=t.extend({},t.likes.defaultOptions,a),t(i.$element).live("click",function(){var e=t(this);if(e.hasClass("disabled"))return!1;e.addClass("disabled");var a=e.attr("id").replace("like-","");return t.ajax({url:i.options.url,data:{uid:a},type:"post",async:!1,dataType:"json",success:function(a){a.ok?(t("#like-"+a.uid+" span").html(a.likes),t.each(a.messages,function(t,e){jQuery("#alerts").notify({type:"success",message:e,fadeOut:{enabled:!0}}).show()})):(t.each(a.messages,function(t,e){jQuery("#alerts").notify({type:"error",message:e,fadeOut:{enabled:!1}}).show()}),e.removeClass("disabled"))}}),!1})},i.init()},t.likes.defaultOptions={url:""},t.fn.likes=function(e){return this.each(function(){new t.likes(this,e)})}}(jQuery),function(t){"use strict";t.fn.locationWidget=function(){return this.each(function(){t(".country",this).live("change",function(){var e=t(this).closest(".location-widget");if(e.hasClass("loading"))return!1;var a=t("select.region",e),i=t("select.city",e),r='<option value="">'+e.attr("data-prompt")+"</option>",n=t(this).val();return i.html(r),n?(a.html('<option value="">'+e.attr("data-loading")+"</option>"),e.addClass("loading"),t.ajax({url:e.attr("data-url"),data:{type:"regions",id:n},type:"post",dataType:"json",success:function(i){var n=[r];i.ok&&t.each(i.items,function(t,e){n.push('<option value="'+e.id+'">'+e.text+"</option>")}),a.html(n.join("")),e.removeClass("loading")}})):a.html(r),!0}),t(".region",this).live("change",function(){var e=t(this).closest(".location-widget");if(e.hasClass("loading"))return!1;var a=t("select.city",e),i='<option value="">'+e.attr("data-prompt")+"</option>",r=t(this).val();return r?(a.html('<option value="">'+e.attr("data-loading")+"</option>"),e.addClass("loading"),t.ajax({url:e.attr("data-url"),data:{type:"cities",id:r},type:"post",dataType:"json",success:function(r){var n=[i];r.ok&&t.each(r.items,function(t,e){n.push('<option value="'+e.id+'">'+e.text+"</option>")}),a.html(n.join("")),e.removeClass("loading")}})):a.html(i),!0})})}}(jQuery),function(t){"use strict";t.fn.__moodHandleJSON=function(e){var a=t("#mood-dialog");e.modal&&a.modal(e.modal),e.title&&t(".modal-header h3",a).html(e.title),e.submit&&t(".modal-footer .submit",a).html(e.submit),e.cancel&&t(".modal-footer .cancel",a).html(e.cancel),e.body&&(t(".modal-body",a).html(e.body),t(".modal-body .tip",a).tooltip(),t(".modal-body form > input[type='text']",a).focus()),e.ok&&t(".mood-block span").html(e.mood),e.messages&&t.each(e.messages,function(e,i){t(".modal-body",a).prepend('<div class="alert alert-error">'+i+"</div>")})},t.fn.moodBlock=function(){return this.each(function(){return t(this).live("click",function(){var e=t("#mood-dialog");e.length||(t("body").append('<div id="mood-dialog" class="modal fade"><div class="modal-header"><a class="close" data-dismiss="modal">&times;</a><h3></h3></div><div class="modal-body"></div><div class="modal-footer"><a href="#" class="submit btn btn-primary"></a><a href="#" class="cancel btn" data-dismiss="modal"></a></div></div>'),e=t("#mood-dialog"),e.modal(),t(".modal-body form",e).live("submit",function(){var e=t("#mood-dialog");return t(".modal-body form",e).length?t(".modal-body form",e).ajaxSubmit({dataType:"json",beforeSubmit:function(){return e.attr("data-loading")&&t(".modal-body",e).prepend('<div class="alert alert-info">'+e.attr("data-loading")+"</div>"),!0},success:function(a){t(".modal-body .alert",e).remove(),t.fn.__moodHandleJSON(a)}}):e.modal("hide"),!1}),t(".submit",e).live("click",function(){var e=t("#mood-dialog");return t(".modal-body form",e).submit(),!1}));var a=t(this).attr("href").substring(1);return e.attr("data-loading",t(this).attr("data-loading")),t.getJSON(a,t.fn.__moodHandleJSON),!1}),this})}}(jQuery),function(t){t.profiles=function(e,a){var i=this;i.$element=t(e),i.element=e,i.$element.data("profiles",i),i.init=function(){i.options=t.extend({},t.profiles.defaultOptions,a),t(".popover-profile .close").live("click",function(){return t(this).closest(".popover-profile").popover("hide"),!1}),t(i.$element).live("click",function(){return!1}).popover(t.extend(i.options.popover,{template:'<div class="popover popover-profile"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>',html:!0,title:function(){if(!t(this).attr("data-content")){var e=this,a=t(this).attr("href");t(this).addClass("loading").attr("data-title",i.options.close),t.ajax({url:i.options.url,data:{id:a.replace("#profile","")},type:"post",async:!1,dataType:"json",success:function(a){a.ok?(a.title&&t(e).attr("data-title",t(e).attr("data-title")+a.title),a.content&&t(e).attr("data-content",a.content)):(t(e).attr("data-title",a.title?t(e).attr("data-title")+a.title:""),a.messages&&"Object"==typeof a.messages&&t(e).attr("data-content","<div class='alert'>"+a.messages.join("<br />")+"</div>"))}}),t(this).removeClass("loading"),t("a[href='"+a+"']").attr("data-title",t(this).attr("data-title")).attr("data-content",t(this).attr("data-content"))}return t(this).attr("data-title")}})).on("shown",function(){var e=this;t(".user-profile").each(function(){this!=e?t(this).popover("hide"):t(".popover-profile .close").unbind("click").bind("click",function(){t(e).popover("hide")})})})},i.init()},t.profiles.defaultOptions={url:"",close:"<a class='close pull-right' href='#'>&times;</a>",popover:{html:!0,placement:"right"}},t.fn.profiles=function(e){return this.each(function(){new t.profiles(this,e)})}}(jQuery),function(t){"use strict";t.fn.__repostHandleJSON=function(e){var a=t("#repost-dialog");e.modal&&a.modal(e.modal),e.title&&t(".modal-header h3",a).html(e.title),e.submit&&t(".modal-footer .submit",a).html(e.submit),e.cancel&&t(".modal-footer .cancel",a).html(e.cancel),e.body&&(t(".modal-body",a).html(e.body),t(".modal-body .tip",a).tooltip(),t(".modal-body form > textarea",a).focus()),e.uid?e.ok&&e.count?(t("#repost-"+e.uid).addClass("disabled"),t("#repost-"+e.uid+" span").html(e.count),e.messages&&t.each(e.messages,function(t,e){jQuery("#alerts").notify({type:"success",message:e,fadeOut:{enabled:!0}}).show()})):e.messages&&t.each(e.messages,function(e,i){t(".modal-body",a).prepend('<div class="alert alert-error">'+i+"</div>")}):e.messages&&t.each(e.messages,function(t,e){alert(e)})},t.fn.repostWidget=function(e){var a=t.extend({},{url:"",loadingText:""},e);return this.each(function(){return t(this).live("click",function(){if(t(this).hasClass("disabled"))return!1;var e=t("#repost-dialog");e.length||(t("body").append('<div id="repost-dialog" class="modal fade"><div class="modal-header"><a class="close" data-dismiss="modal">&times;</a><h3></h3></div><div class="modal-body"></div><div class="modal-footer"><a href="#" class="submit btn btn-primary"></a><a href="#" class="cancel btn" data-dismiss="modal"></a></div></div>'),e=t("#repost-dialog"),e.modal("hide"),t(".modal-body form",e).live("submit",function(){var e=t("#repost-dialog");return t(".modal-body form",e).length?t(".modal-body form",e).ajaxSubmit({dataType:"json",beforeSubmit:function(){return e.attr("data-loading")&&t(".modal-body",e).prepend('<div class="alert alert-info">'+e.attr("data-loading")+"</div>"),!0},success:function(a){t(".modal-body .alert",e).remove(),t.fn.__repostHandleJSON(a)}}):e.modal("hide"),!1}),t(".submit",e).live("click",function(){var e=t("#repost-dialog");return t(".modal-body form",e).submit(),!1}));var i=t(this).attr("id").replace("repost-","");return e.attr("data-loading",a.loadingText),t.ajax({url:a.url,data:{uid:i},type:"post",dataType:"json",success:t.fn.__repostHandleJSON}),!1}),this})}}(jQuery),function(t){"use strict";t.subscribe=function(e,a){var i=this;i.$element=t(e),i.element=e,i.$element.data("subscribe",i),i.init=function(){i.options=t.extend({},t.subscribe.defaultOptions,a),t(i.$element).live("click",function(){var e=t(this);if(e.hasClass("disabled"))return!1;e.addClass("disabled");var a=e.attr("id").replace("subscribe-","");return t.ajax({url:i.options.url,data:{id:a,type:i.options.type},type:"post",async:!1,dataType:"json",success:function(a){a.ok?(e.hasClass("tip")?e.attr("title",a.tooltip).attr("data-original-title",a.tooltip).tooltip("show"):t("span",e).html(a.tooltip),a.active?e.addClass("active"):e.removeClass("active"),t.each(a.messages,function(t,e){jQuery("#alerts").notify({type:"success",message:e,fadeOut:{enabled:!0}}).show()})):t.each(a.messages,function(t,e){jQuery("#alerts").notify({type:"error",message:e,fadeOut:{enabled:!1}}).show()}),e.removeClass("disabled")}}),!1})},i.init()},t.subscribe.defaultOptions={url:"",type:""},t.fn.subscribe=function(e){return this.each(function(){new t.subscribe(this,e)})}}(jQuery),function(t){"use strict";t.fn.videoPreview=function(){return this.each(function(){var e=t(this).attr("data-thumbnail"),a=t(this).attr("data-width"),i=t(this).attr("data-height");t(this).css({width:a,height:i,backgroundImage:"url("+e+")"}).html('<span class="video-preview-overlay" />'),t(this).click(function(){var e=t(this).attr("data-vid"),a=t(this).attr("data-width"),i=t(this).attr("data-height");return t(this).unbind("click").css({cursor:"default"}).html('<iframe width="'+a+'" height="'+i+'" frameborder="0" allowfullscreen="yes" src="http://www.youtube.com/embed/'+e+'"></iframe>'),!1})})}}(jQuery),!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){"use strict";function e(t,e){this.container=t,this.options=e,this.init()}function a(e,a){this.widget=e,this.options=t.extend({},a),this.detectService(),this.service&&this.init()}function i(t){function e(t,e){return e.toUpper()}var a={},i=t.data();for(var r in i){var n=i[r];"yes"===n?n=!0:"no"===n&&(n=!1),a[r.replace(/-(\w)/g,e)]=n}return a}function r(t,e){return n(t,e,encodeURIComponent)}function n(t,e,a){return t.replace(/\{([^\}]+)\}/g,function(t,i){return i in e?a?a(e[i]):e[i]:t})}function o(t,e){var a=u+t;return a+" "+a+"_"+e}function s(e,a){function i(o){"keydown"===o.type&&27!==o.which||t(o.target).closest(e).length||(e.removeClass(d),r.off(n,i),t.isFunction(a)&&a())}var r=t(document),n="click touchstart keydown";r.on(n,i)}function l(t){var e=10;if(document.documentElement.getBoundingClientRect){var a=parseInt(t.css("left"),10),i=parseInt(t.css("top"),10),r=t[0].getBoundingClientRect();r.left<e?t.css("left",e-r.left+a):r.right>window.innerWidth-e&&t.css("left",window.innerWidth-r.right-e+a),r.top<e?t.css("top",e-r.top+i):r.bottom>window.innerHeight-e&&t.css("top",window.innerHeight-r.bottom-e+i)}t.addClass(d)}var c="social-likes",u=c+"__",d=c+"_opened",f="https:"===location.protocol?"https:":"http:",m={facebook:{counterUrl:"https://graph.facebook.com/fql?q=SELECT+total_count+FROM+link_stat+WHERE+url%3D%22{url}%22&callback=?",convertNumber:function(t){return t.data[0].total_count},popupUrl:"https://www.facebook.com/sharer/sharer.php?u={url}&utm_source=SocialShare_facebook&utm_medium=social_share&utm_campaign=Main",popupWidth:600,popupHeight:500},twitter:{counterUrl:"https://cdn.api.twitter.com/1/urls/count.json?url={url}&callback=?",convertNumber:function(t){return t.count},popupUrl:"https://twitter.com/intent/tweet?url={url}&text={title}&utm_source=SocialShare_twitter&utm_medium=social_share&utm_campaign=Main",popupWidth:600,popupHeight:450,click:function(){return/[\.:\-–—]\s*$/.test(this.options.title)||(this.options.title+=":"),!0}},vkontakte:{counterUrl:f+"//vk.com/share.php?act=count&url={url}&index={index}",counter:function(e,a){var i=m.vkontakte;i._||(i._=[],window.VK||(window.VK={}),window.VK.Share={count:function(t,e){i._[t].resolve(e)}});var n=i._.length;i._.push(a),t.getScript(r(e,{index:n})).fail(a.reject)},popupUrl:f+"//vk.com/share.php?url={url}&title={title}&utm_source=SocialShare_vkontakte&utm_medium=social_share&utm_campaign=Main",popupWidth:550,popupHeight:330},odnoklassniki:{counterUrl:f+"//appsmail.ru/share/count/{url}?callback=?",convertNumber:function(t){return t.share_ok},popupUrl:f+"//www.odnoklassniki.ru/dk?st.cmd=addShare&st._surl={url}&utm_source=SocialShare_odnoklassniki&utm_medium=social_share&utm_campaign=Main",popupWidth:550,popupHeight:360},plusone:{counterUrl:!1,counter:function(e,a){var i=m.plusone;return i._?void a.reject():(window.services||(window.services={}),window.services.gplus={cb:function(t){i._.resolve(t)}},i._=a,void t.getScript(r(e)).fail(a.reject))},popupUrl:"https://plus.google.com/share?url={url}&utm_source=SocialShare_googleplus&utm_medium=social_share&utm_campaign=Main",popupWidth:700,popupHeight:500}},p={promises:{},fetch:function(e,a,i){p.promises[e]||(p.promises[e]={});var n=p.promises[e];if(!i.forceUpdate&&n[a])return n[a];var o=t.extend({},m[e],i),s=t.Deferred(),l=o.counterUrl&&r(o.counterUrl,{url:a});return l&&t.isFunction(o.counter)?o.counter(l,s):o.counterUrl?t.getJSON(l).done(function(e){try{var a=e;t.isFunction(o.convertNumber)&&(a=o.convertNumber(e)),s.resolve(a)}catch(i){s.reject()}}).fail(s.reject):s.reject(),n[a]=s.promise(),n[a]}};t.fn.socialLikes=function(a){return this.each(function(){var r=t(this),n=r.data(c);n?t.isPlainObject(a)&&n.update(a):(n=new e(r,t.extend({},t.fn.socialLikes.defaults,a,i(r))),r.data(c,n))})},t.fn.socialLikes.defaults={url:window.location.href.replace(window.location.hash,"").replace(/\?.*/gi,""),title:document.title,counters:!0,zeroes:!1,wait:500,popupCheckInterval:500,singleTitle:"Share"},e.prototype={init:function(){this.container.addClass(c),this.single=this.container.hasClass(c+"_single"),this.initUserButtons(),this.countersLeft=0,this.number=0,this.container.on("counter."+c,t.proxy(this.updateCounter,this));var e=this.container.children();this.makeSingleButton(),this.buttons=[],e.each(t.proxy(function(e,i){var r=new a(t(i),this.options);this.buttons.push(r),r.options.counterUrl&&this.countersLeft++},this)),this.options.counters?this.timer=setTimeout(t.proxy(this.appear,this),this.options.wait):this.appear()},initUserButtons:function(){!this.userButtonInited&&window.socialLikesButtons&&t.extend(!0,m,socialLikesButtons),this.userButtonInited=!0},makeSingleButton:function(){if(this.single){var e=this.container;e.addClass(c+"_vertical"),e.wrap(t("<div>",{"class":c+"_single-w"})),e.wrapInner(t("<div>",{"class":c+"__single-container"}));var a=e.parent(),i=t("<div>",{"class":o("widget","single")}),r=t(n('<div class="{buttonCls}"><span class="{iconCls}"></span>{title}</div>',{buttonCls:o("button","single"),iconCls:o("icon","single"),title:this.options.singleTitle}));i.append(r),a.append(i),i.click(function(){var t=c+"__widget_active";return i.toggleClass(t),i.hasClass(t)?(e.css({left:-(e.width()-i.width())/2,top:-e.height()}),l(e),s(e,function(){i.removeClass(t)})):e.removeClass(d),!1}),this.widget=i}},update:function(e){if(e.forceUpdate||e.url!==this.options.url){this.number=0,this.countersLeft=this.buttons.length,this.widget&&this.widget.find("."+c+"__counter").remove(),t.extend(this.options,e);for(var a=0;a<this.buttons.length;a++)this.buttons[a].update(e)}},updateCounter:function(t,e,a){a&&(this.number+=a,this.single&&this.getCounterElem().text(this.number)),this.countersLeft--,0===this.countersLeft&&(this.appear(),this.container.addClass(c+"_ready"),this.container.trigger("ready."+c,this.number))},appear:function(){this.container.addClass(c+"_visible")},getCounterElem:function(){var e=this.widget.find("."+u+"counter_single");return e.length||(e=t("<span>",{"class":o("counter","single")}),this.widget.append(e)),e}},a.prototype={init:function(){this.detectParams(),this.initHtml(),this.initCounter()},update:function(e){t.extend(this.options,{forceUpdate:!1},e),this.widget.find("."+c+"__counter").remove(),this.initCounter()},detectService:function(){var e=this.widget.data("service");if(!e){for(var a=this.widget[0],i=a.classList||a.className.split(" "),r=0;r<i.length;r++){var n=i[r];if(m[n]){e=n;break}}if(!e)return}this.service=e,t.extend(this.options,m[e])},detectParams:function(){var t=this.widget.data();if(t.counter){var e=parseInt(t.counter,10);isNaN(e)?this.options.counterUrl=t.counter:this.options.counterNumber=e}t.title&&(this.options.title=t.title),t.url&&(this.options.url=t.url)},initHtml:function(){var e=this.options,a=this.widget,i=a.find("a");i.length&&this.cloneDataAttrs(i,a);var n=t("<span>",{"class":this.getElementClassNames("button"),text:a.text()});if(e.clickUrl){var o=r(e.clickUrl,{url:e.url,title:e.title}),s=t("<a>",{href:o});this.cloneDataAttrs(a,s),a.replaceWith(s),this.widget=a=s}else a.click(t.proxy(this.click,this));a.removeClass(this.service),a.addClass(this.getElementClassNames("widget")),n.prepend(t("<span>",{"class":this.getElementClassNames("icon")})),a.empty().append(n),this.button=n},initCounter:function(){if(this.options.counters)if(this.options.counterNumber)this.updateCounter(this.options.counterNumber);else{var e={counterUrl:this.options.counterUrl,forceUpdate:this.options.forceUpdate};p.fetch(this.service,this.options.url,e).always(t.proxy(this.updateCounter,this))}},cloneDataAttrs:function(t,e){var a=t.data();for(var i in a)a.hasOwnProperty(i)&&e.data(i,a[i])},getElementClassNames:function(t){return o(t,this.service)},updateCounter:function(e){e=parseInt(e,10)||0;var a={"class":this.getElementClassNames("counter"),text:e};e||this.options.zeroes||(a["class"]+=" "+c+"__counter_empty",a.text="");var i=t("<span>",a);this.widget.append(i),this.widget.trigger("counter."+c,[this.service,e])},click:function(e){var a=this.options,i=!0;if(t.isFunction(a.click)&&(i=a.click.call(this,e)),i){var n=r(a.popupUrl,{url:a.url,title:a.title});n=this.addAdditionalParamsToUrl(n),this.openPopup(n,{width:a.popupWidth,height:a.popupHeight})}return!1},addAdditionalParamsToUrl:function(e){var a=t.param(t.extend(this.widget.data(),this.options.data));if(t.isEmptyObject(a))return e;var i=-1===e.indexOf("?")?"?":"&";return e+i+a},openPopup:function(e,a){var i=Math.round(screen.width/2-a.width/2),r=0;screen.height>a.height&&(r=Math.round(screen.height/3-a.height/2));var n=window.open(e,"sl_"+this.service,"left="+i+",top="+r+",width="+a.width+",height="+a.height+",personalbar=0,toolbar=0,scrollbars=1,resizable=1");if(n){n.focus(),this.widget.trigger("popup_opened."+c,[this.service,n]);var o=setInterval(t.proxy(function(){n.closed&&(clearInterval(o),this.widget.trigger("popup_closed."+c,this.service))},this),this.options.popupCheckInterval)}else location.href=e}},t(function(){t("."+c).socialLikes()})}),jQuery(document).ready(function(){jQuery("img.lazy").lazy({effect:"fadeIn"}),jQuery("body").append('<a href="#" id="goTop" title="наверх"><i class="icon-chevron-up"></i></a>'),jQuery(window).scroll(function(){jQuery(this).scrollTop()>200?jQuery("#goTop").show():jQuery("#goTop").stop().fadeOut()}),jQuery("#goTop").hide(),setTimeout(function(){jQuery(window).scrollTop()>200&&jQuery("#goTop").show()},100);var t=jQuery(window.opera?"CSS1Compat"==document.compatMode?"html":"body":"html,body");jQuery("#goTop").click(function(){var e=this;return t.animate({scrollTop:0},500,function(){jQuery(e).stop().fadeOut()}),!1});var e=/#comment-(\d+)$/g.exec(document.location.href);e&&jQuery("#comment-"+e[1]+">.media").addClass("selected-comment")});